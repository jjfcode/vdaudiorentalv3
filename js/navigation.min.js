class MobileNavigation{constructor(){this.mobileToggle=document.querySelector('.mobile-menu-toggle');this.navMenu=document.querySelector('.nav-menu');this.navLinks=document.querySelectorAll('.nav-menu a');this.navItems=document.querySelectorAll('.nav-menu li');this.isMenuOpen=false;this.init()}init(){if(!this.mobileToggle||!this.navMenu){console.warn('Mobile navigation elements not found');return}this.navItems.forEach((item,index)=>{item.style.setProperty('--item-index',index)});this.bindEvents();this.setupKeyboardNavigation();this.setupAccessibility();this.setupTouchInteractions()}bindEvents(){this.mobileToggle.addEventListener('click',(e)=>{e.preventDefault();this.toggleMenu()});this.navLinks.forEach(link=>{link.addEventListener('click',()=>{if(this.isMenuOpen){this.closeMenu()}})});document.addEventListener('click',(e)=>{if(this.isMenuOpen&&!this.navMenu.contains(e.target)&&!this.mobileToggle.contains(e.target)){this.closeMenu()}});window.addEventListener('resize',()=>{if(window.innerWidth>768&&this.isMenuOpen){this.closeMenu()}});document.addEventListener('keydown',(e)=>{if(e.key==='Escape'&&this.isMenuOpen){this.closeMenu();this.mobileToggle.focus()}})}setupKeyboardNavigation(){this.navLinks.forEach(link=>{link.setAttribute('tabindex',this.isMenuOpen?'0':'-1')});this.navLinks.forEach((link,index)=>{link.addEventListener('keydown',(e)=>{if(!this.isMenuOpen&&e.key!=='Enter'&&e.key!==' ')return;switch(e.key){case 'ArrowDown':e.preventDefault();this.focusNextLink(index);break;case 'ArrowUp':e.preventDefault();this.focusPreviousLink(index);break;case 'Home':e.preventDefault();this.navLinks[0].focus();break;case 'End':e.preventDefault();this.navLinks[this.navLinks.length-1].focus();break;case 'Tab':if(!e.shiftKey&&index===this.navLinks.length-1){e.preventDefault();this.closeMenu();const focusableElements='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';const focusableContent=document.querySelectorAll(focusableElements);const navMenuIndex=Array.from(focusableContent).indexOf(this.navLinks[index]);if(navMenuIndex!==-1&&navMenuIndex<focusableContent.length-1){focusableContent[navMenuIndex+1].focus()}}break}})});this.mobileToggle.addEventListener('keydown',(e)=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();this.toggleMenu()}})}setupAccessibility(){this.mobileToggle.setAttribute('aria-expanded','false');this.navMenu.setAttribute('aria-hidden','true');this.navMenu.setAttribute('role','navigation');this.navMenu.setAttribute('aria-label','Main navigation');this.addSkipToContentLink();this.createScreenReaderAnnouncement()}setupTouchInteractions(){this.navLinks.forEach(link=>{link.addEventListener('touchstart',()=>{link.classList.add('touch-active')});link.addEventListener('touchend',()=>{setTimeout(()=>{link.classList.remove('touch-active')},150)})});this.mobileToggle.addEventListener('touchstart',()=>{this.mobileToggle.classList.add('touch-active')});this.mobileToggle.addEventListener('touchend',()=>{this.mobileToggle.classList.remove('touch-active')})}addSkipToContentLink(){if(document.querySelector('.skip-to-content')){return}const skipLink=document.createElement('a');skipLink.className='skip-to-content';skipLink.href='#main-content';skipLink.textContent='Skip to content';skipLink.setAttribute('aria-label','Skip to main content');document.body.insertBefore(skipLink,document.body.firstChild);skipLink.addEventListener('click',(e)=>{e.preventDefault();const mainContent=document.querySelector('#home')||document.querySelector('main')||document.querySelector('.section');if(mainContent){mainContent.setAttribute('tabindex','-1');mainContent.focus();setTimeout(()=>{mainContent.removeAttribute('tabindex')},1000)}})}createScreenReaderAnnouncement(){const srAnnouncement=document.createElement('div');srAnnouncement.className='sr-announcement';srAnnouncement.setAttribute('aria-live','polite');srAnnouncement.setAttribute('aria-atomic','true');srAnnouncement.style.position='absolute';srAnnouncement.style.width='1px';srAnnouncement.style.height='1px';srAnnouncement.style.overflow='hidden';srAnnouncement.style.clipPath='inset(50%)';document.body.appendChild(srAnnouncement);this.srAnnouncement=srAnnouncement}toggleMenu(){if(this.isMenuOpen){this.closeMenu()}else{this.openMenu()}}openMenu(){this.isMenuOpen=true;this.navMenu.classList.add('active');this.mobileToggle.classList.add('active');this.mobileToggle.setAttribute('aria-expanded','true');this.navMenu.setAttribute('aria-hidden','false');this.navLinks.forEach(link=>{link.setAttribute('tabindex','0')});document.body.style.overflow='hidden';setTimeout(()=>{this.navLinks[0]?.focus()},300);if(this.srAnnouncement){this.srAnnouncement.textContent='Navigation menu opened'}}closeMenu(){this.isMenuOpen=false;this.navMenu.classList.remove('active');this.mobileToggle.classList.remove('active');this.mobileToggle.setAttribute('aria-expanded','false');this.navMenu.setAttribute('aria-hidden','true');this.navLinks.forEach(link=>{link.setAttribute('tabindex','-1')});document.body.style.overflow='';if(this.srAnnouncement){this.srAnnouncement.textContent='Navigation menu closed'}}focusNextLink(currentIndex){const nextIndex=(currentIndex+1)%this.navLinks.length;this.navLinks[nextIndex].focus()}focusPreviousLink(currentIndex){const prevIndex=currentIndex===0?this.navLinks.length-1:currentIndex-1;this.navLinks[prevIndex].focus()}}document.addEventListener('DOMContentLoaded',()=>{new MobileNavigation()});document.addEventListener('DOMContentLoaded',()=>{const anchorLinks=document.querySelectorAll('a[href^="#"]');anchorLinks.forEach(link=>{link.addEventListener('click',(e)=>{const href=link.getAttribute('href');if(!href||href==='#')return;const targetElement=document.querySelector(href);if(targetElement){e.preventDefault();const navbarHeight=document.querySelector('.navbar').offsetHeight;const targetPosition=targetElement.offsetTop-navbarHeight-20;window.scrollTo({top:targetPosition,behavior:'smooth'})}})})});document.addEventListener('DOMContentLoaded',()=>{const brandLogoItems=document.querySelectorAll('.brand-logo-item[tabindex="0"]');brandLogoItems.forEach(item=>{item.addEventListener('keydown',(e)=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();item.click()}})});const equipmentItems=document.querySelectorAll('.equipment-item, .mixer-item, .used-equipment-item');equipmentItems.forEach(item=>{if(!item.hasAttribute('tabindex')){item.setAttribute('tabindex','0')}item.addEventListener('keydown',(e)=>{if(e.key==='Enter'||e.key===' '){e.preventDefault();const link=item.querySelector('a');if(link){link.click()}}})});const cards=document.querySelectorAll('.card');cards.forEach(card=>{const interactiveElements=card.querySelectorAll('a, button, input, textarea, select');if(interactiveElements.length>0&&!card.hasAttribute('tabindex')){card.setAttribute('tabindex','0')}});const formGroups=document.querySelectorAll('.form-group');formGroups.forEach(group=>{const input=group.querySelector('input, textarea');const icon=group.querySelector('i');if(input&&icon){icon.setAttribute('aria-hidden','true')}});const modal=document.querySelector('.modal');const closeModal=document.querySelector('.close-modal');if(modal&&closeModal){modal.addEventListener('keydown',(e)=>{if(e.key==='Escape'){closeModal.click()}});modal.addEventListener('keydown',(e)=>{if(e.key==='Tab'){const focusableElements=modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');const firstElement=focusableElements[0];const lastElement=focusableElements[focusableElements.length-1];if(e.shiftKey&&document.activeElement===firstElement){e.preventDefault();lastElement.focus()}else if(!e.shiftKey&&document.activeElement===lastElement){e.preventDefault();firstElement.focus()}}})}});